## 1. 数据单位
基于粒度，可将Hive的数据分为：
- 数据库：命名空间可以表面表、视图、分区、列等命名冲突
- 表：具有相同结构的同类数据单元
- 分区：每个表可以具有一个或多个分区键，这些见确定了分区的存储方式
- 桶(bucket或cluster)：每个分区中的数据又可以根据表中某些列的hash函数的值分为存储桶。桶可以高效采样数据。

注意：不必对表进行分区或分桶，但分区或分桶在查询时修剪大量数据，进而加快查询效率。

## 2. 数据类型
Hive支持原生数据类型和复杂数据类型。
### 2.1 基本类型
- (1) 整型
- TINYINT-1 byte, 等同于java的byte
- SMALLINT-2 byte, 等同于java的short
- INT-4 byte, 等同于java的int
- BIGINT-8 byte，等同于java的long

- (2) 布尔类型
- BOOLEAN-TRUE/FALSE

- (3) 浮点类型
- FLOAT,等同于java的float
- DOUBLE，等同于java的double

- (4) 固定精度
- DECIMAL

- (5) STRING
- string
- varchar
- char

- (6) 时间类型
- TIMESTAMP-没有时区
- TIMESTAMP WITH LOCAL TIME ZONE-指定时区
- DATE

- (7) Binary
- BINARY

### 2.2 复杂类型
- STRUCT: 与c语言中的struct类似，可通过'.'符号访问元素内容。如 STRUCT(first STRING, LAST STRING)，则第一个字段可以通过".first"引用
- MAP: 一组键值对元素集合，使用数组表示法可以访问。如MAP包含'fisrt' -> '1'，通过'first'可获取对应的值
- ARRAY: 一组具有相同类型和名称的变量的集合，可通过数组下标进行访问。
```shell
    示例：
    # 原始json数据，且均包含STRUCT, MAP, ARRAY：
    # {"name":"ws","friends":["ly","ll"],"children":{"xiao song":18,"xiaoxiao song":19},"address":{"street":"hf","city":"bj"}}

    # 转换为本地测试文件格式，STRUCT, MAP, ARRAY的元素关系可以用同一字符表示，如"_"：
    # ws,ly_ll,xiao song:18_xiaoxiao song:19,hf_bj
    # ly,ls_lt,te:20_ts:24,xa_sx

    # 创建测试表test:
    hive> create table test(
        name string,
        friends array<string>,
        children map<string, int>,
        address struct<street: string, city:string>)
        row format delimited
        fields terminated by ','
        collection items terminated by '_'
        map keys terminated by ':'
        lines terminated by '\n';

    # 查询：
    hive> select * from test;
    hive> select friends[1],children['xiao song'],address.city from test; # 集合形式的访问

    # 插入少量数据
    hive> insert into test select 'zs',array('ls','ww'), map('xiaoming',10,'xiaohong',20), named_struct('street','ws', 'city', 'sx');
```

### 2.3 默认分隔符
- '\n'：行分隔符
- ^A: 字段分隔符，八进制表示为\001
- ^B: array或struct中的元素分隔符，map中为两个"key-value"中的分隔符，八进制为\002
- ^C: map中key与value间的分隔符，八进制为\003
```shell script
hive> create external table if not exists tbl_test(id string, gender string, age string)
      partitioned by (id_type string, dt int, dt_timestamp int)
      row format delimited
      fields terminated by '\001'
      collection items terminated by '\002'
      map keys terminated by '\003'
      lines terminated by '\n'
      location 'path'; 
```

## 3. 类型转化
### 3.1 隐式类型转换规则：
- a. 任何整数类型都可以隐式转换为一个范围更广的类型，如TINYINT->INT,INT->BIGINT
- b. 所有整数类型、FLOAT和STRING类型可以隐式转换为DOUBLE
- c. TINYINT、SMALLINT、INT都可以转换为FLOAT
- d. BOOLEAN类型不可以转换为任何其他类型
- e. 允许STRING类型隐式转换为数值型数据int, double等
- 
## 3.2 可以使用CAST操作显示进行数据类型转换:
- a. CAST('1' AS INT) # "1" -> 1
- b. CAST('X' AS INT) # 返回NULL





