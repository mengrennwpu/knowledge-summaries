## 1. 系统内置函数
- a. 查看系统自带函数：show functions;
- b. 显示自带函数的用法：desc function upper;
- c. 详细显示自带函数的用法：desc function extended upper;


## 2. 自定义函数
- 当Hive提供的内置函数无法满足业务需求时，可以自定义函数

### 2.1 用户自定义函数分为三种：
- a. UDF(User-Defined-Function): 一进一出
- b. UDAF(User-Defined Aggregation Function): 聚集函数，多进一出，类似于count/max/min
- c. UDTF(User-Defined Table-Generating Function): 一进多出，如lateral view explore()

## 2.2 编程步骤
- 1) 继承org.apache.hadoop.hive.ql.UDF
- 2) 需要实现evaluate函数, evaluate函数支持重载
- 3) 在Hive的命令行窗口创建函数：
- a. 添加jar：add jar linux_jar_path
- b. 创建function：create [temporary] function [dbname.]function_name AS class_name;
- 4) 在Hive命令行删除函数：drop [temporary] function [if exists] [dbname.]function_name

### 2.3 注意事项
- UDF必须要有返回类型定，可以返回null，但返回类型不能为void
```
示例：
a. maven依赖
<dependency>
    <groupId>org.apache.hive</groupId>
    <artifactId>hive-exec</artifactId>
    <version>3.1.2</version>
</dependency>
b. 实现java类，继承UDF，并打包为udf.jar
public class SimpleUDF extends UDF{

    public String evaluate(final String s){
        if(null == s){
            return null;
        }
        return s.toLowerCase();
    }

}
c. 增加jar包：
hive> add jar /home/ws/module/hive/data/udf.jar
d. 创建函数
hive> create temporary function mylower as "com.ws.study.hive.udf.SimpleUDF";
e. 使用函数
hive> select *, mylower(name) from test1;
test1.id	test1.name	_c1
1	zhangsan	zhangsan
1	zhangsan	zhangsan
1	zhangsan	zhangsan
1	zhangsan	zhangsan
2	LISI	lisi
```