## 1. 数据导入
### 1.1 向表中load数据
- 注意：overwrite表示覆盖，而默认为追加方式
```shell
    # 本地加载文件，是以copy的方式进行
    hive> create table test(id int, name string) row format delimited fields terminated by '\t'; # 创建test表
    hive> load data local inpath '/home/test/module/hive/data/student.txt' overwrite into table test; # 本地数据加载至test
    hive> load data local inpath '/home/test/module/hive/data/student.txt' into table test; # 数据追加
    hive> load data local inpath '/home/test/module/hive/data/student.txt' overwrite into table test; # 覆盖之前的数据

    # HDFS加载文件，是以move的方式进行
    hive> dfs -put /home/test/module/hive/data/student.txt /; # 本地文件上传
    hive> dfs -ls /; # 可以看到本地上传的文件
    hive> load data inpath '/student.txt' into table test; # 加载HDFS文件
    hive> dfs -ls /; # 可以看到HDFS中的student.txt已经移动
```
    
### 6.2 通过查询语句向表中插入数据
```shell
    hive> drop table test;
    hive> create table test(id int, name string) partitioned by (month string) row format delimited fields terminated by '\t';

    # 基本插入数据语法
    hive> insert into table test partition(month='201911') values(1, 'zhangsan');

    # 根据单张表查询结果插入数据
    hive> insert overwrite table test partition(month='201912') select id,name from test where month=201911;

    # 根据多表查询结果插入数据(多插入模式)
    hive> from test # 从同一个表中导入可以将该表写在最前面
        > insert overwrite into table test partition(month=202001) select id,name where month=201911
        > insert overwrite into table test partition(month=202002) select id,name where month=201912;
```

### 6.3 查询语句中创建表并加载数据(As select)
```shell
    hive> create table if not exists test1 as select id,name from test;
```

### 6.4 创建表时通过location指定加载数据路径，适用于数据已存在，而表不存在的情况
```shell
    hive> create table if not exists test2(id int, name string)
        > row format delimited fields terminated by '\t'
        > location '/user/hive/warehouse/test2';  # 创建表，并指定表在HDFS中的位置
    hive> dfs -put /opt/test/module/hive/data/student.txt /user/hive/warehouse/test2;
    hive> select * from test2; # 可以看到数据加载成功
```

### 6.5 import数据导入指定Hive表中，前提是export导出的格式【使用较少】
```shell
hive> import table test from '/test/export';
```


## 2. 数据导出
### 2.1 insert 导出
```
    # 将查询结果导出到本地
    hive> insert overwrite local directory '/home/test/module/hive/data/test'
        > select * from test;
    # 将查询的结果格式化导出到本地
    hive> insert overwrite local directory '/home/test/module/hive/data/test'
        > row format delimited fields terminated by '\t'
        > select * from test;
    # 将查询结果导出到HDFS
    hive> insert overwrite directory '/test' row format delimited fields terminated by '\t'
        > select * from test;
```

### 6.2 Hadoop命令导出到本地
```shell
    hive> dfs -get /test/000000_2 /home/test/module/hive/data/test1.txt;
```

### 6.3 Hive命令导出
```shell
    $ hive -e 'select * from default.test;' > /home/test/module/hive/data/test2.txt;
```

### 6.4 export导出到HDFS
```shell
    hive> export table test to '/test/export';
    hive> dfs -ls /test/export; # 可以看到除了数据外，还有_metadata
```


## 3. 清空表数据Truncate
- 注意Truncate只能清空管理表，不能删除外部表数据
```shell
    hive> truncate table test2;
```


